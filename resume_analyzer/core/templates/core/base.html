{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Resume Analyzer{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Icons (optional but nice) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <!-- Custom CSS (cache-bust by bumping ?v= when you update style.css) -->
    <link href="{% static 'core/css/style.css' %}?v=1.0" rel="stylesheet">

    <!-- Small safety CSS: neutralize leftover debug visuals and prevent accidental large-anchor clicks -->
    <style>
      /* Neutralize debug classes left in the DOM (harmless but visually noisy) */
      .debug-click-target { outline: none !important; box-shadow: none !important; }
      .debug-click-label { display: none !important; }

      /* Prevent accidental click-through on decorative/large anchors inside cards.
         Allow only actual button-style anchors (.btn) or anchors explicitly marked with data-allow-click */
      .glass-card a:not(.btn):not([data-allow-click]) {
        pointer-events: none !important;
      }

      /* Ensure navbar links still behave and are selectable */
      a.nav-link, .navbar-brand { user-select: auto; }
    </style>
  </head>
  <body class="bg-gradient-primary">
    <!-- Glassmorphism navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark glass-nav sticky-top">
      <div class="container">
        <a class="navbar-brand fw-bold d-flex align-items-center" href="/">
          <i class="bi bi-stars me-2"></i> ResumeAnalyzer
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNavbar">
          <ul class="navbar-nav ms-auto">
            {% if user.is_authenticated %}
              <li class="nav-item">
                <a class="nav-link" href="{% url 'dashboard' %}"><i class="bi bi-speedometer2 me-1"></i>Dashboard</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'upload_resume' %}"><i class="bi bi-upload me-1"></i>Upload</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'analyze' %}"><i class="bi bi-search-heart me-1"></i>Analyze</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'logout' %}"><i class="bi bi-box-arrow-right me-1"></i>Logout</a>
              </li>
            {% else %}
              <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Login</a></li>
              <li class="nav-item">
                <a class="nav-link btn btn-sm btn-accent ms-lg-2 px-3 text-white" href="{% url 'register' %}">Register</a>
              </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page container -->
    <div class="container py-5 page-container">
      {% if messages %}
        <div class="mb-3">
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show shadow-sm" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      {% block content %}{% endblock %}
    </div>

    <!-- Footer -->
  <!-- <footer style="position: absolute; bottom: 0px; width: 100%;" class="footer-glass py-3 mt-4">
      <div class="container text-center small">
        &copy; {{ now|date:"Y" }} ResumeAnalyzer Â· Built with Django & Bootstrap 5
      </div>
    </footer> -->
  
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Fade-in observer (keeps existing UI behavior) -->
    <script>
      (function() {
        const animatedEls = document.querySelectorAll('.fade-in-up');
        if (animatedEls && animatedEls.length) {
          const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
              if (entry.isIntersecting) entry.target.classList.add('show');
            });
          }, { threshold: 0.1 });
          animatedEls.forEach(el => observer.observe(el));
        }
      })();
    </script>
  </body>
</html>
